define("discourse/plugins/discourse-canned-replies/components/canned-replies-form",["exports","@ember/component"],(function(e,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=n.default.extend({})
e.default=t})),define("discourse/plugins/discourse-canned-replies/components/canned-reply",["exports","@ember/component","discourse/lib/show-modal","discourse/plugins/discourse-canned-replies/lib/apply-reply","discourse-common/lib/get-owner"],(function(e,n,t,i,l){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=n.default.extend({canEdit:!1,init(){this._super(...arguments)
const e=this.get("currentUser"),n=this.get("siteSettings.canned_replies_everyone_enabled")&&this.get("siteSettings.canned_replies_everyone_can_edit"),t=this.get("siteSettings.canned_replies_enabled")&&e&&e.can_edit_canned_replies,i=t||n
this.set("canEdit",i)},actions:{apply(){const e=(0,l.getOwner)(this).lookup("controller:composer");(0,i.default)(this.get("reply.id"),this.get("reply.title"),this.get("reply.content"),e.model),this.appEvents.trigger("canned-replies:hide")},editReply(){const e=(0,l.getOwner)(this).lookup("controller:composer")
e.send("closeModal"),(0,t.default)("edit-reply").setProperties({composerModel:e.composerModel,replyId:this.get("reply.id"),replyTitle:this.get("reply.title"),replyContent:this.get("reply.content")})}}})
e.default=s})),define("discourse/plugins/discourse-canned-replies/connectors/editor-preview/canned-replies",["exports","discourse/lib/show-modal","discourse/lib/ajax","discourse/lib/ajax-error","discourse-common/lib/get-owner","@ember/runloop"],(function(e,n,t,i,l,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r={setupComponent(e,n){const t=this.get("currentUser"),i=this.get("siteSettings.canned_replies_everyone_enabled")&&this.get("siteSettings.canned_replies_everyone_can_edit"),l=this.get("siteSettings.canned_replies_enabled")&&t&&t.can_edit_canned_replies,s=l||i
this.set("canEdit",s),n.setProperties({cannedVisible:!1,loadingReplies:!1,replies:[],filteredReplies:[]}),n.appEvents.has("canned-replies:show")||(this.showCanned=()=>n.send("show"),n.appEvents.on("canned-replies:show",this,this.showCanned)),n.appEvents.has("canned-replies:hide")||(this.hideCanned=()=>n.send("hide"),n.appEvents.on("canned-replies:hide",this,this.hideCanned)),n.addObserver("listFilter",(function(){const e=n.listFilter.toLowerCase(),t=n.replies.map((n=>(n.score=0,-1!==n.title.toLowerCase().indexOf(e)?n.score+=2:-1!==n.content.toLowerCase().indexOf(e)&&(n.score+=1),n))).filter((e=>0!==e.score)).sort(((e,n)=>e.score!==n.score?e.score>n.score?-1:1:e.title!==n.title?e.title<n.title?-1:1:0))
n.set("filteredReplies",t)}))},teardownComponent(e){e.appEvents.has("canned-replies:show")&&this.showCanned&&(e.appEvents.off("canned-replies:show",this,this.showCanned),e.appEvents.off("canned-replies:hide",this,this.hideCanned))},actions:{show(){$("#reply-control .d-editor-preview-wrapper > .d-editor-preview").hide(),this.setProperties({cannedVisible:!0,loadingReplies:!0}),(0,t.ajax)("/canned_replies").then((e=>{this.setProperties({replies:e.replies,filteredReplies:e.replies})})).catch(i.popupAjaxError).finally((()=>{this.set("loadingReplies",!1),this.canEdit&&(0,s.schedule)("afterRender",(()=>document.querySelector(".canned-replies-filter").focus()))}))},hide(){$(".d-editor-preview-wrapper > .d-editor-preview").show(),this.set("cannedVisible",!1)},newReply(){const e=(0,l.getOwner)(this).lookup("controller:composer")
e.send("closeModal"),(0,n.default)("new-reply").set("newContent",e.model.reply)}}}
e.default=r})),define("discourse/plugins/discourse-canned-replies/controllers/canned-replies",["exports","@ember/controller","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","discourse-common/utils/decorators","discourse/lib/ajax-error","discourse/plugins/discourse-canned-replies/lib/apply-reply"],(function(e,n,t,i,l,s,r,o){"use strict"
var a,d
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var c,p,u,f,m,b,h=n.default.extend(t.default,(a=(0,s.observes)("selectedReplyId"),d={selectedReply:null,selectedReplyId:"",loadingReplies:!0,canEdit:!1,init(){this._super(...arguments)
const e=this.get("currentUser"),n=this.siteSettings.canned_replies_everyone_enabled&&this.siteSettings.canned_replies_everyone_can_edit,t=this.siteSettings.canned_replies_enabled&&e&&e.can_edit_canned_replies,i=t||n
this.set("canEdit",i),this.replies=[]},_updateSelection(){this.selectionChange()},onShow(){(0,l.ajax)("/canned_replies").then((e=>{this.set("replies",e.replies),this.selectionChange()})).catch(r.popupAjaxError).finally((()=>this.set("loadingReplies",!1)))},selectionChange(){const e=this.get("selectedReplyId")
let n=""
this.get("replies").forEach((t=>{t.id!==e||(n=t)})),this.set("selectedReply",n)},actions:{apply(){(0,o.default)(this.get("selectedReplyId"),this.selectedReply.title,this.selectedReply.content,this.composerModel),this.send("closeModal")},newReply(){this.send("closeModal"),(0,i.default)("new-reply").set("newContent",this.composerModel.reply)},editReply(){this.send("closeModal"),(0,i.default)("edit-reply").setProperties({replyId:this.selectedReplyId,replyTitle:this.get("selectedReply.title"),replyContent:this.get("selectedReply.content")})}}},c=d,p="_updateSelection",u=[a],f=Object.getOwnPropertyDescriptor(d,"_updateSelection"),m=d,b={},Object.keys(f).forEach((function(e){b[e]=f[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=u.slice().reverse().reduce((function(e,n){return n(c,p,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(c,p,b),b=null),d))
e.default=h})),define("discourse/plugins/discourse-canned-replies/controllers/edit-reply",["exports","@ember/controller","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","discourse-common/utils/decorators","discourse/lib/ajax-error","I18n","@ember/service"],(function(e,n,t,i,l,s,r,o,a){"use strict"
var d,c,p
function u(e,n,t,i,l){var s={}
return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=t.slice().reverse().reduce((function(t,i){return i(e,n,t)||t}),s),l&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(l):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,n,s),s=null),s}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var f=n.default.extend(t.default,(d=(0,s.default)("saving"),c=(0,s.default)("replyTitle","replyContent","saving"),u(p={dialog:(0,a.inject)(),replyTitle:"",replyContent:"",replyId:"",saving:null,onShow(){this.set("saving",null)},savingLabel:e=>null===e?"save":e?"saving":"saved",disableSaveButton:(e,n,t)=>t||""===e||""===n,actions:{save(){this.set("saving",!0),(0,l.ajax)("/canned_replies/".concat(this.replyId),{type:"PATCH",data:{title:this.replyTitle,content:this.replyContent}}).catch(r.popupAjaxError).finally((()=>{this.set("saving",!1),this.appEvents.trigger("canned-replies:show")}))},remove(){this.dialog.deleteConfirm({message:o.default.t("canned_replies.edit.remove_confirm"),didConfirm:()=>(0,l.ajax)("/canned_replies/".concat(this.replyId),{type:"DELETE"}).then((()=>{this.send("closeModal"),this.site.mobileView?(0,i.default)("canned-replies"):this.appEvents.trigger("canned-replies:show")})).catch(r.popupAjaxError)})},cancel(){this.send("closeModal"),this.site.mobileView?(0,i.default)("canned-replies"):this.appEvents.trigger("canned-replies:show")}}},"savingLabel",[d],Object.getOwnPropertyDescriptor(p,"savingLabel"),p),u(p,"disableSaveButton",[c],Object.getOwnPropertyDescriptor(p,"disableSaveButton"),p),p))
e.default=f})),define("discourse/plugins/discourse-canned-replies/controllers/new-reply",["exports","@ember/controller","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","discourse-common/utils/decorators","discourse/lib/ajax-error"],(function(e,n,t,i,l,s,r){"use strict"
var o,a
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var d,c,p,u,f,m,b=n.default.extend(t.default,(o=(0,s.default)("newTitle","newContent"),d=a={newTitle:"",newContent:"",onShow(){this.setProperties({newTitle:"",newContent:""})},disableSaveButton:(e,n)=>""===e||""===n,actions:{save(){(0,l.ajax)("/canned_replies",{type:"POST",data:{title:this.newTitle,content:this.newContent}}).then((()=>{this.send("closeModal"),this.site.mobileView?(0,i.default)("canned-replies"):this.appEvents.trigger("canned-replies:show")})).catch(r.popupAjaxError)},cancel(){this.send("closeModal"),this.site.mobileView?(0,i.default)("canned-replies"):this.appEvents.trigger("canned-replies:show")}}},c="disableSaveButton",p=[o],u=Object.getOwnPropertyDescriptor(a,"disableSaveButton"),f=a,m={},Object.keys(u).forEach((function(e){m[e]=u[e]})),m.enumerable=!!m.enumerable,m.configurable=!!m.configurable,("value"in m||m.initializer)&&(m.writable=!0),m=p.slice().reverse().reduce((function(e,n){return n(d,c,e)||e}),m),f&&void 0!==m.initializer&&(m.value=m.initializer?m.initializer.call(f):void 0,m.initializer=void 0),void 0===m.initializer&&(Object.defineProperty(d,c,m),m=null),a))
e.default=b})),define("discourse/plugins/discourse-canned-replies/discourse/templates/components/canned-replies-form",["exports","@ember/template-factory"],(function(e,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=(0,n.createTemplateFactory)({id:"7nex47ue",block:'[[[10,"form"],[12],[1,"\\n  "],[10,0],[14,0,"canned-replies-title-input-wrapper"],[12],[1,"\\n    "],[10,"label"],[12],[10,"strong"],[12],[1,[28,[35,0],["canned_replies.title.name"],null]],[13],[13],[1,"\\n    "],[1,[28,[35,1],null,[["class","value"],["canned-replies-form-title-input",[33,2]]]]],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,0],[14,0,"canned-replies-form-content-wrapper"],[12],[1,"\\n    "],[10,"label"],[12],[10,"strong"],[12],[1,[28,[35,0],["canned_replies.content.name"],null]],[13],[13],[1,"\\n    "],[1,[28,[35,3],null,[["class","value"],["canned-replies-form-content-input",[33,4]]]]],[1,"\\n  "],[13],[1,"\\n"],[13],[1,"\\n"]],[],false,["i18n","input","title","d-editor","content"]]',moduleName:"discourse/plugins/discourse-canned-replies/discourse/templates/components/canned-replies-form.hbs",isStrictMode:!1})
e.default=t})),define("discourse/plugins/discourse-canned-replies/discourse/templates/components/canned-reply",["exports","@ember/template-factory"],(function(e,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=(0,n.createTemplateFactory)({id:"2lbRWchA",block:'[[[10,"details"],[14,0,"canned-reply"],[15,1,[29,["canned-reply-",[33,0,["id"]]]]],[12],[1,"\\n  "],[10,"summary"],[14,0,"canned-reply-title"],[12],[1,"\\n    "],[10,0],[14,0,"canned-reply-title-text"],[12],[1,[33,0,["title"]]],[13],[1,"\\n\\n    "],[10,0],[14,0,"actions"],[12],[1,"\\n      "],[1,[28,[35,1],null,[["class","action","icon"],["canned-replies-apply",[28,[37,2],[[30,0],"apply"],null],"far-clipboard"]]]],[1,"\\n\\n"],[41,[33,4],[[[1,"        "],[1,[28,[35,1],null,[["class","action","icon"],["canned-replies-edit",[28,[37,2],[[30,0],"editReply"],null],"pencil-alt"]]]],[1,"\\n"]],[]],null],[1,"    "],[13],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,0],[14,0,"canned-replies-content"],[12],[1,"\\n    "],[1,[28,[35,5],[[33,0,["content"]]],null]],[1,"\\n  "],[13],[1,"\\n"],[13],[1,"\\n"]],[],false,["reply","d-button","action","if","canEdit","cook-text"]]',moduleName:"discourse/plugins/discourse-canned-replies/discourse/templates/components/canned-reply.hbs",isStrictMode:!1})
e.default=t})),define("discourse/plugins/discourse-canned-replies/discourse/templates/connectors/editor-preview/canned-replies",["exports","@ember/template-factory"],(function(e,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=(0,n.createTemplateFactory)({id:"wxNEKOLy",block:'[[[41,[33,1],[[[1,"  "],[10,0],[14,0,"d-editor-preview"],[12],[1,"\\n"],[6,[39,2],null,[["condition"],[[33,3]]],[["default"],[[[[41,[33,4],[[[1,"        "],[10,0],[14,0,"canned-replies-edit-bar"],[12],[1,"\\n          "],[1,[28,[35,5],null,[["class","action","icon","label"],["canned-replies-new",[28,[37,6],[[30,0],"newReply"],null],"plus","canned_replies.insert.new_button"]]]],[1,"\\n          "],[1,[28,[35,7],null,[["class","value","placeholder"],["canned-replies-filter",[33,8],[28,[37,9],["canned_replies.filter_hint"],null]]]]],[1,"\\n\\n          "],[1,[28,[35,5],null,[["class","action","icon"],["modal-close close btn-flat",[28,[37,6],[[30,0],"hide"],null],"times"]]]],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[42,[28,[37,11],[[28,[37,11],[[33,12]],null]],null],null,[[[1,"        "],[1,[28,[35,13],null,[["reply"],[[30,1]]]]],[1,"\\n"]],[1]],null]],[]]]]],[1,"  "],[13],[1,"\\n"]],[]],null]],["r"],false,["if","cannedVisible","conditional-loading-spinner","loadingReplies","canEdit","d-button","action","text-field","listFilter","i18n","each","-track-array","filteredReplies","canned-reply"]]',moduleName:"discourse/plugins/discourse-canned-replies/discourse/templates/connectors/editor-preview/canned-replies.hbs",isStrictMode:!1})
e.default=t})),define("discourse/plugins/discourse-canned-replies/discourse/templates/modal/canned-replies",["exports","@ember/template-factory"],(function(e,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=(0,n.createTemplateFactory)({id:"qpdZQMTJ",block:'[[[6,[39,0],null,[["title","class","style"],["canned_replies.insert.modal_title","canned-replies-modal","overflow: visible"]],[["default"],[[[[6,[39,1],null,[["condition"],[[33,2]]],[["default"],[[[[1,"    "],[10,0],[14,0,"details"],[12],[1,"\\n      "],[10,0],[14,0,"reply-selector"],[12],[1,"\\n        "],[10,0],[14,0,"selector"],[12],[1,"\\n          "],[1,[28,[35,3],null,[["id","valueAttribute","value","nameProperty","content","none"],["canned-replies-combobox","id",[33,4],"title",[33,5],"canned_replies.insert.choose"]]]],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n\\n"],[41,[33,7],[[[1,"        "],[10,0],[14,0,"content"],[12],[1,"\\n          "],[10,0],[12],[1,[28,[35,8],[[33,7,["content"]]],null]],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[1,"    "],[13],[1,"\\n"]],[]]]]]],[]]]]],[1,"\\n"],[10,0],[14,0,"modal-footer"],[12],[1,"\\n"],[41,[33,9],[[[1,"    "],[1,[28,[35,10],null,[["class","action","icon","label"],["pull-left canned-replies-new",[28,[37,11],[[30,0],"newReply"],null],"plus","canned_replies.insert.new_button"]]]],[1,"\\n"]],[]],null],[1,"\\n"],[41,[33,7],[[[41,[33,9],[[[1,"      "],[1,[28,[35,10],null,[["class","action","icon","label"],["pull-left canned-replies-edit",[28,[37,11],[[30,0],"editReply"],null],"pencil-alt","canned_replies.insert.edit_button"]]]],[1,"\\n"]],[]],null],[1,"\\n    "],[1,[28,[35,10],null,[["class","action","icon","label"],["btn-primary pull-right canned-replies-apply",[28,[37,11],[[30,0],"apply"],null],"far-clipboard","canned_replies.insert.insert_button"]]]],[1,"\\n"]],[]],null],[13],[1,"\\n"]],[],false,["d-modal-body","conditional-loading-spinner","loadingReplies","combo-box","selectedReplyId","replies","if","selectedReply","cook-text","canEdit","d-button","action"]]',moduleName:"discourse/plugins/discourse-canned-replies/discourse/templates/modal/canned-replies.hbs",isStrictMode:!1})
e.default=t})),define("discourse/plugins/discourse-canned-replies/discourse/templates/modal/edit-reply",["exports","@ember/template-factory"],(function(e,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=(0,n.createTemplateFactory)({id:"3SfPdUDZ",block:'[[[6,[39,0],null,[["title","class"],["canned_replies.edit.modal_title","canned-replies-modal"]],[["default"],[[[[1,"  "],[1,[28,[35,1],null,[["title","content"],[[33,2],[33,3]]]]],[1,"\\n"]],[]]]]],[1,"\\n"],[10,0],[14,0,"modal-footer canned-replies-footer"],[12],[1,"\\n  "],[1,[28,[35,4],null,[["class","action","label","disabled"],["btn-primary edit-reply-save-btn",[28,[37,5],[[30,0],"save"],null],[33,6],[33,7]]]]],[1,"\\n\\n  "],[1,[28,[35,4],null,[["action","icon","label","class"],[[28,[37,5],[[30,0],"cancel"],null],"chevron-left","canned_replies.back","canned-replies-edit-back"]]]],[1,"\\n\\n  "],[1,[28,[35,4],null,[["class","action","icon","disabled"],["btn-danger",[28,[37,5],[[30,0],"remove"],null],"trash-alt",[33,8]]]]],[1,"\\n"],[13],[1,"\\n"]],[],false,["d-modal-body","canned-replies-form","replyTitle","replyContent","d-button","action","savingLabel","disableSaveButton","saving"]]',moduleName:"discourse/plugins/discourse-canned-replies/discourse/templates/modal/edit-reply.hbs",isStrictMode:!1})
e.default=t})),define("discourse/plugins/discourse-canned-replies/discourse/templates/modal/new-reply",["exports","@ember/template-factory"],(function(e,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=(0,n.createTemplateFactory)({id:"XnouJfyh",block:'[[[6,[39,0],null,[["title","class"],["canned_replies.add.modal_title","canned-replies-modal"]],[["default"],[[[[1,"  "],[1,[28,[35,1],null,[["title","content"],[[33,2],[33,3]]]]],[1,"\\n"]],[]]]]],[1,"\\n"],[10,0],[14,0,"modal-footer canned-replies-footer"],[12],[1,"\\n  "],[1,[28,[35,4],null,[["class","action","label","disabled"],["btn-primary new-reply-save-btn",[28,[37,5],[[30,0],"save"],null],"save",[33,6]]]]],[1,"\\n\\n"],[13],[1,"\\n"]],[],false,["d-modal-body","canned-replies-form","newTitle","newContent","d-button","action","disableSaveButton"]]',moduleName:"discourse/plugins/discourse-canned-replies/discourse/templates/modal/new-reply.hbs",isStrictMode:!1})
e.default=t})),define("discourse/plugins/discourse-canned-replies/initializers/add-canned-replies-ui-builder",["exports","discourse/lib/plugin-api","discourse/lib/show-modal"],(function(e,n,t){"use strict"
function i(e){e.modifyClass("controller:composer",{pluginId:"discourse-canned-replies",actions:{showCannedRepliesButton(){this.site.mobileView?(0,t.default)("canned-replies").set("composerModel",this.model):(this.appEvents.trigger("composer:show-preview"),this.appEvents.trigger("canned-replies:show"))}}}),e.addToolbarPopupMenuOptionsCallback((()=>({id:"canned_replies_button",icon:"far-clipboard",action:"showCannedRepliesButton",label:"canned_replies.composer_button_text"})))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var l={name:"add-canned-replies-ui-builder",initialize(e){const t=e.lookup("site-settings:main"),l=e.lookup("current-user:main")
t.canned_replies_enabled&&l&&l.can_use_canned_replies&&(0,n.withPluginApi)("0.5",i)}}
e.default=l})),define("discourse/plugins/discourse-canned-replies/lib/apply-reply",["exports","discourse/lib/ajax","discourse/lib/ajax-error"],(function(e,n,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,i,l,s){if(s){const e={my_username:s.get("user.username"),my_name:s.get("user.name"),original_poster_username:s.get("topic.details.created_by.username"),original_poster_name:s.get("topic.details.created_by.name"),reply_to_username:s.get("post.username"),reply_to_name:s.get("post.name"),last_poster_username:s.get("topic.last_poster_username"),reply_to_or_last_poster_username:s.get("post.username")||s.get("topic.last_poster_username")}
for(let n in e)e[n]?(i=i.replace(new RegExp("%{".concat(n,"(,fallback:.[^}]*)?}"),"g"),e[n]),l=l.replace(new RegExp("%{".concat(n,"(,fallback:.[^}]*)?}"),"g"),e[n])):(i=(i=i.replace(new RegExp("%{".concat(n,",fallback:(.[^}]*)}"),"g"),"$1")).replace(new RegExp("%{".concat(n,"}"),"g"),""),l=(l=l.replace(new RegExp("%{".concat(n,",fallback:(.[^}]*)}"),"g"),"$1")).replace(new RegExp("%{".concat(n,"}"),"g"),""))}s.appEvents.trigger("composer:insert-block",l),s&&!s.title&&s.set("title",i);(0,n.ajax)("/canned_replies/".concat(e,"/use"),{type:"PATCH"}).catch(t.popupAjaxError)}}))

//# sourceMappingURL=discourse-canned-replies-347a5d89f83a75783cbb1628dd569013493ec6496e582dad3b02833232228e58.map
//!

;
